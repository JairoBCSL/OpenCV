= Programas de PDI

= 2. Manipulação de pixels de uma imagem

== 2.2. Exercício

=== 2.2.1. Regions.cpp

Esse exercício consiste em tornar negativa uma região definida como parâmetro de uma imagem de entrada também fornecida como parâmetro. O exemplo usou a image do *_Biel_* e os vértices opostos (100,100) e (200,200) que formarão a região retangular a ser negativada.

O código fonte do programa pode ser visto abaixo

[source,cpp]
----
//make regions
//./regions nome_imagem xmin ymin xmax ymax
#include <iostream>
#include <opencv2/opencv.hpp>
using namespace cv;

int main(int argc, char** argv){
  Mat image;
  int largura, altura, xmin, ymin, xmax, ymax;

  CvPoint p;
  image = imread(argv[1],CV_LOAD_IMAGE_GRAYSCALE);
  if(!image.data){
    std::cout << "imagem nao carregou corretamente\n";
    return(-1);
  }
  xmin = atoi(argv[2]);
  ymin = atoi(argv[3]);
  xmax = atoi(argv[4]);
  ymax = atoi(argv[5]);

  largura=image.size().width;
  altura=image.size().height;

  p.x=largura-1;
  p.y=altura-1;

  for(int i=xmin; i<xmax; i++){
    for(int j=ymin; j<ymax; j++){
      image.at<uchar>(i,j)=(unsigned char)(256-(int)image.at<uchar>(i,j));
    }
  }

  imshow("Processada", image);
  imwrite("negativo.png", image);
  
  waitKey();
  return 0;
}	
----

E os comandos a serem usados para compilar e executar o exemplo podem ser vistos abaixo

```markdown
make regions
./regions biel.png 100 100 200 200
```
Usando como imagem de entrada o *_Biel_*

image::/imagens/biel.png[]

e executando o programa, obtemos a imagem *_Negativo_* abaixo

image::/imagens/negativo.png

